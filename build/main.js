!function(){var e=document.getElementById("visualiser"),n=e.getContext("2d"),t=0,i={init:function(i){i.spectrum=new Uint8Array(i.frequencyBinCount),t=Math.ceil(window.innerWidth/i.frequencyBinCount),e.width=i.frequencyBinCount,e.height=window.innerHeight/2,e.style.height="50vh",n.clearRect(0,0,e.width,e.height)},process:function(i){i.getByteFrequencyData(i.spectrum),n.clearRect(0,0,e.width,e.height);for(var o=0;o<i.spectrum.length;o++)n.fillRect(o*t,window.innerHeight/2-i.spectrum[o],t,window.innerHeight/2)}},o=document.getElementById("visualiser"),r=o.getContext("2d"),a=0,c={init:function(e){e.spectrum=new Uint8Array(e.frequencyBinCount),o.width=window.innerWidth,o.height=e.frequencyBinCount,o.style.height="100vh",r.clearRect(0,0,o.width,o.height),a=o.width},process:function(e){e.getByteFrequencyData(e.spectrum);for(var n=r.getImageData(a,0,1,o.height),t=0;t<e.spectrum.length;t++)n.data[4*t+0]=e.spectrum[e.spectrum.length-t],n.data[4*t+1]=e.spectrum[e.spectrum.length-t],n.data[4*t+2]=e.spectrum[e.spectrum.length-t],n.data[4*t+3]=255;r.putImageData(n,a,0),a+=1,a%=o.width}},u=document.getElementById("visualiser"),d=u.getContext("2d"),h={init:function(e){e.waveform=new Float32Array(e.frequencyBinCount),u.width=e.waveform.length,u.height=window.innerHeight,u.style.height="100vh",d.clearRect(0,0,u.width,u.height)},process:function(e){e.getFloatTimeDomainData(e.waveform),d.clearRect(0,0,u.width,u.height),d.beginPath();for(var n=0;n<e.waveform.length;n++){var t=(.5+e.waveform[n]/2)*u.height;0==n?d.moveTo(n,t):d.lineTo(n,t)}d.stroke()}};!function(e,n){if("undefined"==typeof document)return n;e=e||"";var t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}("\nbody {\n    margin: 0;\n    font-family: sans-serif;\n    width: 100%;\n    cursor: pointer;\n    background: #DBD5C9;\n}\n\ncanvas {\n    z-index: 0;\n    width: 100%;\n    height: 100vh;\n}\n\ninput {\n    flex: 100%;\n    height: 50px;\n    background: transparent;\n    outline: none;\n    border: none;\n    border-bottom: 1px solid black;\n    font-size: 1rem;\n    color: black;\n}\n\nbutton {\n    position: absolute;\n    top: calc(50% - 25px);\n    left: calc(50% - 60px);\n    width: 120px;\n    height: 50px;\n    border: 1px solid black;\n    background: transparent;\n    font-size: .8rem;\n    color: black;\n    text-transform: uppercase;\n    outline: none;\n    cursor: pointer;\n}\n\nbutton:hover {\n    border: 2px solid white;\n    color: white;\n    font-size: .85rem;\n}\n\nbutton:disabled {\n    color: grey;\n}",void 0);var s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),l=(document.getElementById("visualiser"),new Array(h,i,c));s&&l.shift();var g=0,m=void 0;navigator.mediaDevices.getUserMedia({audio:!0,video:!1,echoCancellation:!0}).then(function(e){var n=new(window.AudioContext||window.webkitAudioContext),t=n.createScriptProcessor(0,1,1),i=n.createMediaStreamSource(e);m=n.createAnalyser(),i.connect(t),i.connect(m),t.connect(n.destination),l[g].init(m),t.onaudioprocess=function(e){l[g].process(m),e.outputBuffer.getChannelData(0).forEach(function(e){return 0})}}).catch(function(e){return window.alert(e)});var f=function(){g=(g+1)%l.length,l[g].init(m)};document.body.onclick=function(e){return f()}}();
